# 学生宿舍卫生管理系统 - 需求分析说明书

## 1. 业务流程与角色综述

本系统旨在解决校园宿舍卫生检查数据流转不畅、监管困难的问题。核心业务流主要分为两条主线：

1. **卫生检查闭环**：检查录入     结果公示     异议/纠错     统计归档。
2. **权限管理闭环**：学生申请     教师审核     角色赋权     履职监管。

### 1.1 角色定义

- **学生 (Student)**：系统的基础用户，数据的主要消费者。
- **卫生检查员 (Inspector)**：经授权的学生，数据的生产者（一线录入）。
- **教师 (Teacher)**：业务的监管者，拥有数据修正权和人事审批权。
- **系统管理员 (Admin)**：系统的运维者，负责最高权限配置。

------

## 2. 功能需求详解

我们将功能需求按**模块化**进行拆解，严格遵循“输入-处理-输出”的逻辑。

### 2.1 模块一：个人中心与基础服务

该模块是所有用户共有的基础能力。

| **功能名称**       | **详细描述/业务规则**                                        | **优先级** |
| ------------------ | ------------------------------------------------------------ | ---------- |
| **身份识别与登录** | 系统需根据账号（学号/工号）自动识别用户身份（学生/检查员/教师/管理员），并加载对应的菜单权限。 | P0         |
| **个人信息维护**   | 用户可以查询个人档案；**仅允许修改**登录密码和联系方式；学号、姓名、班级等敏感信息不可自行修改。 | P0         |

### 2.2 模块二：卫生检查业务（核心业务）

此模块处理核心的“打分”与“查看”逻辑。

| **功能点**       | **执行者**  | **业务逻辑规约**                                             |
| ---------------- | ----------- | ------------------------------------------------------------ |
| **我的卫生查询** | 学生/检查员 | 1. 默认展示当前登录学生所属宿舍的最新卫生记录。 2. 支持按“学期”或“月份”查询历史记录。 3. 展示字段：日期、总分、扣分说明/备注、检查人。 |
| **常规检查录入** | 检查员      | 1. 选择目标宿舍（支持按楼号-层号筛选）。 2. 录入总分（0-100分整数）。 3. 录入备注（**选填**，用于说明扣分原因或表扬亮点）。 4. **限制**：检查员提交后，经确认后自己不可再修改（防止私下篡改），如需修改需联系教师。 |
| **全量数据管理** | 教师        | 1. **数据修正（特权）**：教师可以修改任何历史检查记录的分数和备注（用于纠正检查员的误判）。 2. **数据删除（特权）**：教师可删除错误的检查记录。 3. **全校查询**：支持多维度组合查询（按班级、按宿舍楼、按分数段筛选）。 |

### 2.3 模块三：人事与权限管理

此模块处理“谁能录入数据”的问题。

| **功能点**         | **执行者** | **业务逻辑规约**                                             |
| ------------------ | ---------- | ------------------------------------------------------------ |
| **检查员权限申请** | 学生       | 1. 学生填写申请理由，提交申请。 2. 系统校验：若该学生已经是检查员或有待审核的申请，则禁止重复提交。 |
| **申请审核**       | 教师       | 1. 查看“待审核”申请列表（包含申请人信息、申请时间）。 2. **通过操作**：系统自动将该学生角色的权限升级为“卫生检查员”。 3. **驳回操作**：需填写驳回原因，学生权限保持不变。 |
| **权限指派**       | 管理员     | **强制角色变更**：管理员可直接在后台修改任意用户的角色归属（例如直接将某学生设为检查员，或将某检查员撤职为普通学生），无需经过申请流程。 |

### 2.4 模块四：基础资源管理（配置中心）

此模块维护系统运行所需的“静态数据”。

| **功能点**       | **执行者**  | **业务逻辑规约**                                             |
| ---------------- | ----------- | ------------------------------------------------------------ |
| **宿舍资源管理** | 教师/管理员 | **增删改查**宿舍信息（楼号、房号）。 **约束规则**：若某宿舍内仍有住户（学生），则系统禁止删除该宿舍信息，必须先清空人员。 |
| **班级信息管理** | 教师/管理员 | **增删改查**班级信息（如“软件232”）。用于统计报表时的归类依据。 |
| **学生档案管理** | 教师/管理员 | **增删改查**学生基础信息。 重点功能：**分配宿舍**（将学生ID与宿舍ID绑定），这是“查询本宿舍卫生”功能的数据基础。 |

------

## 3. 数据约束与业务规则

1. **分值约束**：卫生检查总分必须为 **0-100 之间的整数**。
2. **归属唯一性**：一个学生在同一时间段内，只能归属于一个宿舍和一个班级。
3. **操作留痕**：所有的“打分”和“修改分数”操作，系统后台应记录操作人的ID和操作时间（虽然前端不一定全显示，但业务逻辑上必须有“责任人”）。（就比如某些业务表的时候应该生成一个createtime这种的）
4. **备注灵活性**：检查记录的“备注”字段允许为空，但建议当分数低于60分（不及格）时，前端给予“建议填写整改意见”的提示（软性约束）。

------

## 4. 假设与依赖 

1. **数据初始化**：假设系统上线前，管理员已通过批量导入或手动录入方式，完成了所有宿舍楼、房间及班级基础数据的初始化。
2. **账号分发**：假设学生的初始账号为学号，初始密码为统一默认值（如123456），首次登录建议修改。



### 5. 系统技术选型与架构设计

本系统采用主流的 **B/S（Browser/Server）架构**，基于 **前后端分离** 的开发模式设计。后端负责核心业务逻辑、权限控制与数据持久化，前端负责交互渲染与资源管理，两者通过 RESTful API 进行数据交互，实现了开发解耦与部署的灵活性。

#### 5.1 后端技术栈

| **技术组件**   | **选型名称**        | **版本建议** | **选型理由 (Rationale)**                                     |
| -------------- | ------------------- | ------------ | ------------------------------------------------------------ |
| **核心框架**   | **Spring Boot**     | 3.5.8        | 基于“约定优于配置”理念，内置 Tomcat 容器，能够快速构建独立运行的企业级 Web 应用，大幅降低开发配置成本与部署难度。 |
| **持久层框架** | **MyBatis**         | 3.5.13       | 轻量级 ORM 框架，支持定制化 SQL、存储过程及高级映射。相比全自动 ORM，它提供了更灵活的 SQL 控制能力，特别适合处理宿舍卫生统计、多表关联查询等复杂数据场景。 |
| **缓存中间件** | **Redis**           | 7.0+         | 基于内存的高性能 Key-Value 数据库。本项目引入其作为缓存层，用于存储用户 Token 令牌及热点业务数据。通过内存高速读写特性，显著减轻 MySQL 的 I/O 压力，提升高并发场景下的系统响应速度。 |
| **安全框架**   | **Spring Security** | -            | 提供强大的认证（Authentication）与授权（Authorization）机制。本项目利用其实现完善的 RBAC（基于角色的访问控制），确保学生、教师与管理员的权限隔离及数据安全。 |
| **接口文档**   | **Knife4j**         | 4.4.0        | 作为 Swagger 的增强版，提供友好的中文界面与离线文档功能，支持在线调试，便于前后端接口联调与测试，显著提升开发效率。 |
| **代码简化**   | **Lombok**          | 1.18.42      | 通过注解（@Data, @Builder 等）在编译期自动生成 Getter/Setter、构造器及日志对象，彻底消除 Java 类的样板代码，使实体类（Entity/DTO）更加简洁清晰。 |
| **工具库**     | **Hutool**          | 5.8.38       | 轻量级 Java 工具类库，涵盖加密（SecureUtil）、日期处理（DateUtil）及字符串校验等功能，避免重复造轮子，保持业务逻辑代码的纯净。 |

#### 

#### 5.2 前端技术栈

| **技术组件**  | **选型名称**     | **版本建议** | **选型理由 (Rationale)**                                     |
| ------------- | ---------------- | ------------ | ------------------------------------------------------------ |
| **核心框架**  | **Vue 3**        | 3.3+         | 采用组合式 API（Composition API），逻辑复用性强，代码组织更灵活，适合处理卫生检查录入等复杂表单逻辑，渲染性能显著优于 Vue 2。 |
| **构建工具**  | **Vite**         | 4.x / 5.x    | 新一代前端构建工具，利用 ES Modules 提供毫秒级的冷启动与热更新（HMR）体验，构建速度显著优于 Webpack，适合快速迭代开发。 |
| **UI 组件库** | **Element Plus** | -            | 专为 Vue 3 设计的桌面端组件库，提供成熟的表格、表单及弹窗组件，遵循设计规范，确保管理后台界面的风格统一性与美观度。 |
| **网络请求**  | **Axios**        | 1.x          | 基于 Promise 的标准 HTTP 客户端，配合拦截器（Interceptor）统一处理 Token 身份凭证注入、请求超时与后端异常响应，增强交互稳定性。 |

#### 5.3 开发环境与数据存储

| **类别**     | **名称**           | **说明**                                                     |
| ------------ | ------------------ | ------------------------------------------------------------ |
| **开发语言** | **Java (JDK 17)**  | 强类型语言，生态完善，LTS 版本长期支持，保证系统的稳定性与安全性。 |
| **数据库**   | **MySQL 8.0**      | 关系型数据库，支持 ACID 事务特性，保障宿舍卫生检查、考勤等核心数据的一致性与完整性。 |
| **项目管理** | **Maven 3.6+**     | 标准化的项目管理工具，负责后端依赖库的版本管理、生命周期控制与自动化构建。 |
| **开发工具** | **IDEA + VS Code** | 分别作为后端与前端的主力开发工具，配合各类插件实现语法高亮、代码智能提示与调试。 |

